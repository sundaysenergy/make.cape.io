---
domain: www.test.org # This is not used for anything yet.
cdn: www.test.org
uid: kc2 # The CAPE user ID to use for authenticating against the providers when requesting API resources.
cape_version: 2.1.7

api: # An API is just a set of default information.

  content:
    provider: dropbox
    arg:
      root: dropbox
      path_prefix: /test
    load:
      resource: delta
      _id: path
      arg:
        cursor: ''

model:
  files:
    type: files
    filter:
      api: content
      should:
        _ext: ['.jpg', '.jpeg', '.png', '.css', '.js', '.ico', '.gif', '.html', '.ttf', '.pdf']
    file:
      source_file:
        api: content
        resource: files
        file_id: '{{&_id}}'
        type: any
        arg:
          root: dropbox
          path: '{{path}}'

  content:
    type: ezle
    filter:
      api: content
      must:
        _ext: .md
    field: # The base "entity" in CAPE is the _id field. That's it.
      # To get the contents of the file we need to add a "meta-field"
      _self: # _self is a special meta-field that will place its own fields within the base context.
        api: content # The _self field is processed first.
        resource: files # This just defines what API at github to use.
        type: md # This tells CAPE what to do with the file that it gets. This should default to the file extension.
        arg:
          root: dropbox
          path: '{{path}}'

view:
