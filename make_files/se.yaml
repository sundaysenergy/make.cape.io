---
domain: cape.sundaysenergy.com
uid: 1

api:
  gh:
    provider: github
    index: sundaysenergy/www.sundaysenergy.com
    id_prop: path

    arg_default:
      repo: www.sundaysenergy.com
      owner: sundaysenergy
      branch: master

    arg_required:
      path: string

    convert:
      yml: yaml
      yaml: yaml
      md: md
      markdown: md

    load:
      all:
        resource: tree
        arg:
          recursive: true
          sha: b452d883b98c4558d62baeb8d6f7933ba5c481ef

      entity:
        provider: github
        resource: raw
        args:
          owner: sundaysenergy
          repo: www.sundaysenergy.com
          branch: master

model:
  data:
    gh:
      filter:
        load:
          self: entity
        must:
          path: data.yml

  hosting_drupal:
    gh:
      render:
        load:
          self: entity
      filter:
        must:
          path:
            dirname: services/hosting/drupal
            ext: .md
        must_not:
          path:
            basename: index.md

  services:
    gh:
      filter:
        must:
          type: blob
          path:
            dirname: services

  docs:
    gh:
      filter:
        must:
          type: blob
          path:
            dirsplit:
              1: docs

  layout:
    gh:
      filter:
        must:
          type: blob
          path:
            dirname: theme/layouts
            ext: .html

# Displays
convert:
  # We want to load up the data and the templates and compile them.
  - # anytime views below are updated, this is triggered.
    convert: mustache
    source: [data, hosting_drupal]
    # The source will be passed to each template in the order below.
    template: [layout/hosting.html, layout/default.html]
    # The result of each is added as a source property before passing to the next.
    result: content
    # The final result is going to have a uri. #uri supports mustache variables.
    uri: /services/hosting/drupal/index.html # uri for rendered output. filename.
    type: html # The file type of the render we are creating.
    destintion: cloudfiles
  -
    source: [hosting_drupal]
    uri: /services/hosting/drupal/{{id}}.json
  -
    source: [data]
    uri: data.json
