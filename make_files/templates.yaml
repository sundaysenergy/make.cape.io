---
domain: templates.cape.io # This is the cache CNAME used for the virtual server on the compile server. CNAME that domain to cache.cape.io and it will serve the compiled website.
uid: 1 # The CAPE user ID to use for authenticating against the providers when requesting API resources. This needs to be updated to the correct uid.
cape_version: 2.0.2 # Current version of cape can be found at v2.api.cape.io/version

api: # An API is a set of default information. Think of an API as a collection of content.
  content: # Used to get content from github.
    provider: github
    arg:
      owner: sundaysenergy
      repo: templates.cape.io
      branch: gh-pages
    load: # To load previously created content from this API you need to specificy the load param.
      resource: tree # Github has a nice index of all content in a repo.
      _id: path
      arg:
        recursive: true # Thankfully they have an option to get results recursively.
        sha: gh-pages
    field:
      _source: true # Can be true or a text string to change the field id.

model:
  files:
    type: files
    filter:
      api: content
    field: # The base "entity" in CAPE is the _id field. That's it.
      _file:
        file_id: '{{&_id}}' # When the _file field has a value it saves that field as a file.
        api: content # The _self field is processed first.
        resource: raw # This just defines what API at github to use.
        type: any # This tells CAPE what to do with the file that it gets.
        arg:
          path: '{{&_id}}' # The raw github API call requires a path param.

